## Test 09: Memory [1 pts]

Tests memory usage calculation.

### Subtest 01: Predefined memory usages, simulated by dynamically generating /proc/meminfo contents for each call to open(2). See tests/inputs/virtualproc/meminfo for the sequence of file states.
```
/home/mmalensek/grader/target/tests/lib/virtualproc.h:96:vp_initialize(): Overriding original open() system call at 0x7f2bb5cf9bc0 -> 0x563eda7b48d2
/home/mmalensek/grader/target/tests/lib/virtualproc.h:107:vp_initialize(): Fakes found: stat=0 mem=7 loadavg=0
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |           287322793 kB|
procfs.c:388:init_mstats(): FOUND mem_total:	 |        1306012696 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|274.012368|
	mem_total:	|1245.510765|


> --- Test Iteration: 0 ---

> Assertion: (fabs(mem.used - expected_mem.used) < 0.01) [  OK  ]
> mem.used: 971.50
> expected_mem.used: 971.50

> Assertion: (fabs(mem.total - expected_mem.total) < 0.01) [  OK  ]
> mem.total: 1245.51
> expected_mem.total: 1245.51
procfs.c:388:init_mstats(): FOUND mem_total:	 |        1306012696 kB|
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |          1306012696 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|1245.510765|
	mem_total:	|1245.510765|


> --- Test Iteration: 1 ---

> Assertion: (fabs(mem.used - expected_mem.used) < 0.01) [  OK  ]
> mem.used: 0.00
> expected_mem.used: 0.00

> Assertion: (fabs(mem.total - expected_mem.total) < 0.01) [  OK  ]
> mem.total: 1245.51
> expected_mem.total: 1245.51
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |          120153168 kB|
procfs.c:388:init_mstats(): FOUND mem_total:	 |        1006012696 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|114.586990|
	mem_total:	|959.408470|


> --- Test Iteration: 2 ---

> Assertion: (fabs(mem.used - expected_mem.used) < 0.01) [  OK  ]
> mem.used: 844.82
> expected_mem.used: 844.82

> Assertion: (fabs(mem.total - expected_mem.total) < 0.01) [  OK  ]
> mem.total: 959.41
> expected_mem.total: 959.41
procfs.c:388:init_mstats(): FOUND mem_total:	 |        1306012696 kB|
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |          708903691 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|676.063243|
	mem_total:	|1245.510765|


> --- Test Iteration: 3 ---

> Assertion: (fabs(mem.used - expected_mem.used) < 0.01) [  OK  ]
> mem.used: 569.45
> expected_mem.used: 569.45

> Assertion: (fabs(mem.total - expected_mem.total) < 0.01) [  OK  ]
> mem.total: 1245.51
> expected_mem.total: 1245.51
procfs.c:388:init_mstats(): FOUND mem_total:	 |        1306012696 kB|
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |          45 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|0.000043|
	mem_total:	|1245.510765|


> --- Test Iteration: 4 ---

> Assertion: (fabs(mem.used - expected_mem.used) < 0.01) [  OK  ]
> mem.used: 1245.51
> expected_mem.used: 1245.51

> Assertion: (fabs(mem.total - expected_mem.total) < 0.01) [  OK  ]
> mem.total: 1245.51
> expected_mem.total: 1245.51
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |          1160784084 kB|
procfs.c:388:init_mstats(): FOUND mem_total:	 |        1306012696 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|1107.009968|
	mem_total:	|1245.510765|


> --- Test Iteration: 5 ---

> Assertion: (fabs(mem.used - expected_mem.used) < 0.01) [  OK  ]
> mem.used: 138.50
> expected_mem.used: 138.50

> Assertion: (fabs(mem.total - expected_mem.total) < 0.01) [  OK  ]
> mem.total: 1245.51
> expected_mem.total: 1245.51
procfs.c:388:init_mstats(): FOUND mem_total:	 |        1306012696 kB|
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |          1049000 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|1.000404|
	mem_total:	|1245.510765|


> --- Test Iteration: 6 ---

> Assertion: (fabs(mem.used - expected_mem.used) < 0.01) [  OK  ]
> mem.used: 1244.51
> expected_mem.used: 1244.51

> Assertion: (fabs(mem.total - expected_mem.total) < 0.01) [  OK  ]
> mem.total: 1245.51
> expected_mem.total: 1245.51

--> Subtest passed
```

### Subtest 02: Using fakeproc dataset
```
procfs.c:379:init_mstats(): FOUND MEM_AVAIL:	 |   20273148 kB|
procfs.c:388:init_mstats(): FOUND mem_total:	 |       65698624 kB|
procfs.c:396:init_mstats(): VALUES:
	mem_avail:	|19.333981|
	mem_total:	|62.655090|

> Assertion: mem.used == 43.32 (threshold: 0.010000) [  OK  ]
> mem.used: 43.32

> Assertion: mem.total == 62.66 (threshold: 0.010000) [  OK  ]
> mem.total: 62.66

--> Subtest passed
```

